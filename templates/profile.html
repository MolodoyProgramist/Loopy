{% extends "base.html" %}
{% load static %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/style.css' %}">

<div class="profile-container">

    <!-- –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
    <div class="sidebar-left">
        <a href="/" class="menu-btn">üè† –ì–ª–∞–≤–Ω–∞—è</a>
        <a href="/friends/" class="menu-btn">üë• –î—Ä—É–∑—å—è</a>
        <a href="/requests/" class="menu-btn">üì® –ó–∞—è–≤–∫–∏</a>
        <a href="/achievements/" class="menu-btn">üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</a>
        <a href="/settings/" class="menu-btn">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</a>
        <hr>
        <button class="create-group-btn">‚ûï –°–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É</button>
        <p class="no-groups-text">–£ –≤–∞—Å –Ω–µ—Ç –≥—Ä—É–ø–ø</p>
    </div>

    <!-- –¶–µ–Ω—Ç—Ä -->
    <div class="profile-main">
        <div class="profile-header">
            <!-- –ê–≤–∞—Ç–∞—Ä -->
            <div class="avatar-container">
                {% if user.profile.avatar %}
                    <img src="{{ user.profile.avatar.url }}" alt="avatar" class="avatar">
                {% else %}
                    <div class="avatar-default" style="background-color: {{ user.profile.color|default:'#6c63ff' }}">
                        {{ user.username|first|upper }}
                    </div>
                {% endif %}
            </div>

            <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
            <div class="profile-info">
                <h2>{{ user.username }}</h2>
                <div class="stats">
                    <div>
                        <strong>{{ posts|length|default:0 }}</strong>
                        <span>–ø–æ—Å—Ç—ã</span>
                    </div>
                    <div>
                        <strong>{{ user.profile.followers.count|default:0 }}</strong>
                        <span>–ø–æ–¥–ø–∏—Å—á–∏–∫–∏</span>
                    </div>
                    <div>
                        <strong>{{ user.profile.following.count|default:0 }}</strong>
                        <span>–ø–æ–¥–ø–∏—Å–∫–∏</span>
                    </div>
                </div>
            </div>
        </div>

        <hr>

        <!-- –ü–æ—Å—Ç—ã -->
        <div class="posts-grid">
            {% if posts %}
                {% for post in posts %}
                    <div class="post-card">
                        {% if post.image %}
                            <img src="{{ post.image.url }}" alt="post" class="post-img">
                        {% else %}
                            <div class="post-placeholder">–ù–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</div>
                        {% endif %}

                        <div class="post-content">
                            <h4 class="post-title">{{ post.title }}</h4>
                            <p class="post-desc">{{ post.content|default:"(–Ω–µ—Ç –æ–ø–∏—Å–∞–Ω–∏—è)" }}</p>
                            <p class="post-date">üìÖ {{ post.created_at|date:"d.m.Y H:i" }}</p>
                        </div>
                    </div>
                {% endfor %}
            {% else %}
                <p class="no-posts">–£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ–∫–∞ –Ω–µ—Ç –ø–æ—Å—Ç–æ–≤.</p>
            {% endif %}
        </div>
    </div>

    <!-- –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å -->
    <div class="sidebar-right">
        <h3>üí¨ –ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä</h3>
        <div class="messenger-placeholder">
            <p>–°–æ–æ–±—â–µ–Ω–∏–π –ø–æ–∫–∞ –Ω–µ—Ç</p>
        </div>
    </div>

</div>
{% endblock %}
