{% extends "base.html" %}
{% load static %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/style.css' %}">

<div class="profile-container">

    <!-- –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
    <div class="sidebar-left">
        <a href="/main/" class="menu-btn">üè† –ì–ª–∞–≤–Ω–∞—è</a>
        <a href="/addposts/" class="menu-btn">üìá –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Å—Ç–æ–≤</a>
        <a href="/friends/" class="menu-btn">üë• –î—Ä—É–∑—å—è</a>
        <a href="/requests/" class="menu-btn">üì® –ó–∞—è–≤–∫–∏</a>
        <a href="/achievements/" class="menu-btn">üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</a>
        <a href="/settings/" class="menu-btn">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</a>
        <hr>
        <button class="create-group-btn">‚ûï –°–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É</button>
        <p class="no-groups-text">–£ –≤–∞—Å –Ω–µ—Ç –≥—Ä—É–ø–ø</p>
    </div>

    <!-- –¶–µ–Ω—Ç—Ä -->
    <div class="profile-main">
        <div class="profile-header">
            <div class="avatar-container">
                {% if user.profile.avatar %}
                    <img src="{{ user.profile.avatar.url }}" alt="avatar" class="avatar">
                {% else %}
                    <div class="avatar-default" style="background-color: {{ user.profile.color|default:'#6c63ff' }}">
                        {{ user.username|first|upper }}
                    </div>
                {% endif %}
            </div>

            <div class="profile-info">
                <h2>{{ user.username }}</h2>
                <div class="stats">
                    <div>
                        <strong>{{ posts|length|default:0 }}</strong>
                        <span>–ø–æ—Å—Ç—ã</span>
                    </div>
                    <div>
                        <strong>{{ user.profile.followers.count|default:0 }}</strong>
                        <span>–ø–æ–¥–ø–∏—Å—á–∏–∫–∏</span>
                    </div>
                    <div>
                        <strong>{{ user.profile.following.count|default:0 }}</strong>
                        <span>–ø–æ–¥–ø–∏—Å–∫–∏</span>
                    </div>
                </div>
            </div>
        </div>

        <hr>

        <div class="posts-grid">
            {% if posts %}
                {% for post in posts %}
                    <div class="post-card">
                        {% if post.image %}
                            <img src="{{ post.image.url }}" alt="post" class="post-img">
                        {% else %}
                            <div class="post-placeholder">–ù–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</div>
                        {% endif %}

                        <div class="post-content">
                            <h4 class="post-title">{{ post.title }}</h4>
                            <p class="post-desc">{{ post.content|default:"(–Ω–µ—Ç –æ–ø–∏—Å–∞–Ω–∏—è)" }}</p>
                            <p class="post-date">üìÖ {{ post.created_at|date:"d.m.Y H:i" }}</p>
                        </div>
                    </div>
                {% endfor %}
            {% else %}
                <p class="no-posts">–£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ–∫–∞ –Ω–µ—Ç –ø–æ—Å—Ç–æ–≤.</p>
            {% endif %}
        </div>
    </div>

    <!-- –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å -->
    <div class="sidebar-right">
        <h3>üí¨ –ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä</h3>
        <div class="messenger-placeholder">
            <p>–°–æ–æ–±—â–µ–Ω–∏–π –ø–æ–∫–∞ –Ω–µ—Ç</p>
        </div>
    </div>

</div>

<style>
/* ========== –ë–ê–ó–û–í–´–ï ========== */
:root{
  --accent: #6c63ff;
  --accent-dark: #5a52e0;
  --bg: #f6f7ff;
  --card: #ffffff;
  --muted: #777;
}

body {
  background: var(--bg);
  font-family: 'Inter', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  margin: 0;
  padding: 0 18px;
  color: #222;
}

/* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä */
.profile-container {
  display: flex;
  gap: 25px;
  margin: 30px auto;
  max-width: 1300px;
  align-items: flex-start;
}

/* ========== –õ–ï–í–ê–Ø –ü–ê–ù–ï–õ–¨ ========== */
.sidebar-left {
  width: 20%;
  min-width: 200px;
  background: var(--card);
  border-radius: 14px;
  padding: 18px;
  box-shadow: 0 6px 20px rgba(108,99,255,0.08);
  box-sizing: border-box;
}

.sidebar-left hr {
  border: none;
  height: 1px;
  background: #f0eef8;
  margin: 12px 0;
}

.menu-btn {
  display: block;
  padding: 10px 12px;
  margin-bottom: 8px;
  border-radius: 8px;
  text-decoration: none;
  color: #333;
  font-weight: 500;
  transition: background .18s ease, color .18s ease, transform .12s ease;
}
.menu-btn:hover {
  background: #f3f0ff;
  color: var(--accent);
  transform: translateY(-2px);
}

.create-group-btn {
  width: 100%;
  background: var(--accent);
  color: white;
  border: none;
  padding: 10px;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 600;
  transition: background .18s ease, transform .12s ease;
}
.create-group-btn:hover {
  background: var(--accent-dark);
  transform: translateY(-2px);
}

.no-groups-text {
  text-align: center;
  color: var(--muted);
  margin-top: 8px;
  font-size: 13px;
}

/* ========== –¶–ï–ù–¢–†–ê–õ–¨–ù–ê–Ø –ö–ê–†–¢–û–ß–ö–ê ========== */
.profile-main {
  width: 60%;
  background: var(--card);
  border-radius: 18px;
  padding: 30px;
  box-shadow: 0 12px 30px rgba(108,99,255,0.10);
  transition: box-shadow .25s ease, transform .18s ease;
  box-sizing: border-box;
}
.profile-main:hover {
  box-shadow: 0 18px 40px rgba(108,99,255,0.14);
}

/* –®–∞–ø–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è */
.profile-header {
  display: flex;
  align-items: center;
  gap: 30px;
}

.avatar-container {
  width: 120px;
  height: 120px;
  border-radius: 50%;
  border: 3px solid var(--accent);
  overflow: hidden;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-shrink: 0;
  background: linear-gradient(135deg, #f8f7ff, #fff);
}

.avatar {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.avatar-default {
  width: 120px;
  height: 120px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 46px;
  font-weight: 600;
  color: #fff;
  background: linear-gradient(135deg, var(--accent), var(--accent-dark));
  box-shadow: 0 6px 18px rgba(90,82,224,0.12) inset;
}

.profile-info h2 {
  font-size: 24px;
  color: #222;
  margin: 0 0 8px 0;
  letter-spacing: -0.2px;
}

.stats {
  display: flex;
  gap: 30px;
  margin-top: 6px;
  align-items: baseline;
}
.stats div {
  text-align: center;
}
.stats strong {
  display: block;
  font-size: 18px;
  color: #222;
}
.stats span {
  font-size: 13px;
  color: #666;
  display: block;
  margin-top: 2px;
}

/* –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å */
.profile-main hr {
  border: none;
  height: 1px;
  background: #f0eef8;
  margin: 20px 0;
}

/* ========== –°–ï–¢–ö–ê –ü–û–°–¢–û–í ========== */
.posts-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
  gap: 20px;
  margin-top: 10px;
}

/* –ö–∞—Ä—Ç–æ—á–∫–∞ –ø–æ—Å—Ç–∞ */
.post-card {
  background: #fafaff;
  border-radius: 12px;
  overflow: hidden;
  transition: transform .28s cubic-bezier(.2,.9,.3,1), box-shadow .28s;
  box-shadow: 0 6px 18px rgba(108,99,255,0.06);
  will-change: transform;
  animation: cardIn .32s ease both;
}
.post-card:hover {
  transform: translateY(-8px);
  box-shadow: 0 14px 36px rgba(108,99,255,0.14);
}

/* –õ—ë–≥–∫–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è */
@keyframes cardIn {
  from { opacity: 0; transform: translateY(8px) scale(.995); }
  to   { opacity: 1; transform: translateY(0) scale(1); }
}

.post-img {
  width: 100%;
  height: 200px;
  object-fit: cover;
  display: block;
  background: #eee;
}

.post-placeholder {
  height: 200px;
  background: linear-gradient(180deg,#f1efff,#ebe9ff);
  display: flex;
  align-items: center;
  justify-content: center;
  color: #555;
  font-size: 14px;
}

.post-content {
  padding: 14px;
}
.post-title {
  font-weight: 600;
  font-size: 16px;
  color: #222;
  margin: 0 0 6px 0;
}
.post-desc {
  font-size: 13.5px;
  color: #555;
  margin: 0 0 10px 0;
  line-height: 1.4;
  min-height: 40px;
}
.post-date {
  font-size: 12px;
  color: #777;
  text-align: right;
  margin-top: 8px;
}

/* ========== –ü–†–ê–í–ê–Ø –ü–ê–ù–ï–õ–¨ ========== */
.sidebar-right {
  width: 20%;
  min-width: 200px;
  background: var(--card);
  border-radius: 14px;
  padding: 18px;
  box-shadow: 0 6px 20px rgba(108,99,255,0.08);
  box-sizing: border-box;
}

.sidebar-right h3 {
  color: #222;
  margin: 0 0 10px 0;
}
.messenger-placeholder {
  background: #f8f7ff;
  border-radius: 10px;
  padding: 15px;
  text-align: left;
  color: var(--muted);
  box-shadow: inset 0 2px 6px rgba(108,99,255,0.02);
}

/* ========== –ú–ï–î–ò–ê (–ê–î–ê–ü–¢–ò–í) ========== */
@media (max-width: 1100px) {
  .profile-container { gap: 18px; }
  .sidebar-left, .sidebar-right { display: none; } /* —Å–∫—Ä—ã–≤–∞–µ–º –±–æ–∫–æ–≤—ã–µ –ø–∞–Ω–µ–ª–∏ –Ω–∞ –ø–ª–∞–Ω—à–µ—Ç–µ */
  .profile-main { width: 100%; }
  .posts-grid { grid-template-columns: repeat(auto-fill, minmax(210px, 1fr)); }
}

@media (max-width: 720px) {
  .profile-header { flex-direction: column; align-items: center; text-align: center; gap: 16px; }
  .avatar-container { width: 104px; height: 104px; }
  .avatar-default { font-size: 36px; }
  .stats { justify-content: center; gap: 18px; flex-wrap: wrap; }
  .posts-grid { grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap: 14px; }
  .post-img, .post-placeholder { height: 150px; }
  .post-title { font-size: 15px; }
}

/* ========== –ú–ï–õ–ö–ò–ï –£–õ–£–ß–®–ï–ù–ò–Ø ========== */
a.menu-btn, button.create-group-btn { outline: none; }
.post-card img { -webkit-user-drag: none; user-select: none; }
</style>
{% endblock %}
